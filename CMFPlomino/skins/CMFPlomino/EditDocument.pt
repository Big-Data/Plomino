<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:javascript_head fill-slot="javascript_head_slot">
<tal:test tal:condition="python:here.hasItem('Form')">
	<tal:block tal:condition="python:here.getForm().hasDateTimeField()">
	    <script type="text/javascript"
	              charset="iso-8859-1"
	              tal:attributes="src string:$portal_url/jscalendar/calendar_stripped.js">
	    </script>
		<script type="text/javascript"
              charset="iso-8859-1"
              tal:attributes="src string:$portal_url/jscalendar/calendar-en.js">
      </script>
	</tal:block>
</tal:test>
</metal:javascript_head>

<metal:css fill-slot="css_slot">
<tal:test tal:condition="python:here.hasItem('Form')">
	<tal:block tal:condition="python:here.getForm().hasDateTimeField()">
      <style type="text/css"
             media="all"
             tal:content="structure string:<!-- @import url($portal_url/jscalendar/calendar-system.css); -->">
      </style>
	</tal:block>
</tal:test>
</metal:css>

<metal:main fill-slot="main">
    <div id="bodyContent">
	<tal:test tal:condition="python:here.hasItem('Form')">
    <form tal:attributes="name python:here.getForm().id" action="saveDocument" method="POST" enctype="multipart/form-data">
		<tal:block tal:define="myF python:here.getForm();
							b myF/ActionBarPosition|nothing">
			<tal:block
			tal:define="owner python:myF"
			tal:condition= "python:test((b and  myF.ActionBarPosition=='BOTTOM'),False, True)"
			>
	    		<span metal:use-macro="here/ActionBar/macros/EditDocumentActionBar" >
					display form actions
				</span>
			</tal:block>
			<span tal:content="structure python:here.editWithForm(myF)" />
					<tal:block
			tal:define="owner python:myF"
			tal:condition="python:test((b and  myF.ActionBarPosition!='TOP'),True, False)"
			>
	    		<span metal:use-macro="here/ActionBar/macros/EditDocumentActionBar" >
					display form actions
				</span>
			</tal:block>
		</tal:block>
	</form>
	</tal:test>
	<tal:test tal:condition="python:not(here.hasItem('Form'))">
		<h3>No form defined to display this document.</h3>
		<br/>A Plomino document always needs a Plomino form in order to be displayed or edited.
	</tal:test>
	</div>
</metal:main>

</body>
</html>

